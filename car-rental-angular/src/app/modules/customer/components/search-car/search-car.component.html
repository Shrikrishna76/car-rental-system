<div class="container">
  <!-- SEARCH FORM -->
  <div *ngIf="!showResults" class="form-wrapper">
    <nz-spin [nzSpinning]="isSpinning" nzTip="Searching...">
      <h2>Search Cars</h2>
      <form nz-form [formGroup]="searchCarForm" class="search-form">
        <nz-form-item>
          <nz-form-control>
            <nz-select formControlName="brand" nzPlaceHolder="Select Brand" nzAllowClear nzShowSearch>
              <nz-option *ngFor="let b of listOfBrands" [nzLabel]="b" [nzValue]="b"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-control>
            <nz-select formControlName="type" nzPlaceHolder="Select Type" nzAllowClear nzShowSearch>
              <nz-option *ngFor="let t of listOfType" [nzLabel]="t" [nzValue]="t"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-control>
            <nz-select formControlName="transmission" nzPlaceHolder="Select Transmission" nzAllowClear nzShowSearch>
              <nz-option *ngFor="let tr of listOfTransmission" [nzLabel]="tr" [nzValue]="tr"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-control>
            <nz-select formControlName="color" nzPlaceHolder="Select Color" nzAllowClear nzShowSearch>
              <nz-option *ngFor="let c of listOfColor" [nzLabel]="c" [nzValue]="c"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>

        <button nz-button nzType="primary" class="btn-submit" (click)="searchCar()">Search</button>
      </form>
    </nz-spin>
  </div>

  <!-- RESULTS -->
  <div *ngIf="showResults" class="results-wrapper">
    <div class="results-header">
      <h2>Search Results</h2>
      <button nz-button nzType="default" (click)="backToSearch()">← Back to Search</button>
    </div>

    <div *ngIf="cars.length === 0" class="no-result">
      No cars found.
    </div>

    <div class="car-grid">
      <div class="car-card" *ngFor="let car of cars">
        <img [src]="car.processedImage" alt="Car Image" />
        <div class="car-details">
          <h3>{{ car.name }}</h3>
          <p><strong>Brand:</strong> {{ car.brand }}</p>
          <p><strong>Type:</strong> {{ car.type }}</p>
          <p><strong>Transmission:</strong> {{ car.transmission }}</p>
          <p><strong>Color:</strong> {{ car.color }}</p>
          <p><strong>Price:</strong> ₹{{ car.price }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
